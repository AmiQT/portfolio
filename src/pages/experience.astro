---
import Layout from '../layouts/Layout.astro';
import IdeActivityBar from '../components/software-dev/IdeActivityBar.astro';
import IdeSidebar from '../components/software-dev/IdeSidebar.astro';
import MobileNav from '../components/software-dev/MobileNav.astro';
import NotebookCell from '../components/software-dev/NotebookCell.astro';

// Files for sidebar
const files = [
    { name: 'experience.json', active: true, icon: 'üíº', href: import.meta.env.BASE_URL + 'experience' },
    { name: 'home-software-developer.ipynb', active: false, icon: 'üìù', href: import.meta.env.BASE_URL + 'home-software-developer/' },
    { name: 'about.md', active: false, icon: 'üìÑ', href: import.meta.env.BASE_URL + 'about' },
];

const experiences = [
    {
        title: "Vice President Club, Information Technology Club",
        organization: "Universiti Tun Hussein Onn Malaysia",
        duration: "December 2023 - January 2025",
        icon: "üéØ",
        color: "blue",
        responsibilities: [
            "Successfully managed and executed 17 club events, including meetings, annual grand dinners, and team-building activities.",
            "Provided critical support to the club president, including assisting with urgent matters and representing the club in official settings.",
            "Actively participated in and led various club departments, demonstrating strong leadership and teamwork skills."
        ]
    },
    {
        title: "Facilitator Food Department Orientation Day (MHS)",
        organization: "Universiti Tun Hussein Onn Malaysia",
        duration: "October 2024 (2 Weeks)",
        icon: "üçΩÔ∏è",
        color: "green",
        responsibilities: [
            "Managed a food station responsible for collecting, gathering, and distributing food packs to 1900 students.",
            "Conducted thorough inspections of food upon delivery from vendors to ensure quantity, quality, and safety standards were met.",
            "Prioritized the dietary needs of all participants, ensuring immediate replacement of any food items causing allergic reactions."
        ]
    },
    {
        title: "Student Representative Council",
        organization: "MPP Universiti Teknologi MARA, Johor",
        duration: "December 2021 - February 2023",
        icon: "üì£",
        color: "purple",
        responsibilities: [
            "Proficient in managing and creating engaging content for Instagram, Facebook, and Telegram platforms.",
            "Skilled in designing and producing high-quality visual content, including social media graphics, mockups, and merchandise designs.",
            "Experienced in editing video content for various purposes, including montages, trailers, and opening event sequences."
        ]
    }
];
---

<Layout title="Experience - Noor Azami" description="Explore the professional experience and timeline of Noor Azami, highlighting key roles and accomplishments.">
    <div class="flex h-screen bg-white dark:bg-[#0d1117] text-gray-900 dark:text-gray-300 overflow-hidden font-sans transition-colors duration-300">
        <IdeActivityBar />
        <IdeSidebar files={files} />

        <!-- Main Editor Area -->
        <main class="flex-1 flex flex-col min-w-0 bg-white dark:bg-[#0d1117] transition-colors duration-300">
            <!-- Tab Bar -->
            <div class="flex bg-gray-100 dark:bg-[#010409] border-b border-gray-200 dark:border-gray-800 overflow-x-auto scrollbar-hide transition-colors duration-300">
                <div class="flex items-center gap-2 px-4 py-2 bg-white dark:bg-[#0d1117] border-t-2 border-orange-500 text-gray-900 dark:text-white text-sm min-w-fit cursor-pointer transition-colors duration-300">
                    <span>üíº</span>
                    <span>experience.json</span>
                    <span class="ml-2 text-gray-500 hover:text-gray-900 dark:hover:text-white cursor-pointer" title="Close Editor">√ó</span>
                </div>
                <a 
                    href={import.meta.env.BASE_URL + "home-software-developer/"}
                    class="flex items-center gap-2 px-4 py-2 text-gray-500 hover:bg-gray-200 dark:hover:bg-[#161b22] cursor-pointer text-sm min-w-fit transition-colors duration-300"
                >
                    <span>üìù</span>
                    <span>home-software-developer.ipynb</span>
                </a>
            </div>

            <!-- Breadcrumbs -->
            <div class="flex items-center gap-2 px-4 py-1 bg-white dark:bg-[#0d1117] border-b border-gray-200 dark:border-gray-800 text-xs text-gray-500 transition-colors duration-300">
                <span>src</span>
                <span>‚Ä∫</span>
                <span>data</span>
                <span>‚Ä∫</span>
                <span>experience.json</span>
                <div class="ml-auto flex gap-2">
                    <span class="text-blue-600 dark:text-blue-400">{experiences.length} positions</span>
                </div>
            </div>

            <!-- Content Area -->
            <div class="flex-1 overflow-y-auto p-4 md:p-8 scroll-smooth" id="experience-content">
                <!-- Cell 1: Header -->
                <NotebookCell
                    cellNumber={1}
                    code={`// Load professional experience data\nimport experience from './data/experience.json';\n\nconst timeline = {\n  totalPositions: ${experiences.length},\n  yearsActive: "2021 - Present",\n  focusAreas: ["Leadership", "IT", "Event Management"]\n};\n\nconsole.log("Career timeline loaded");`}
                >
                    <section class="relative flex flex-col items-center justify-center text-center py-12 md:py-16 bg-gradient-to-br from-orange-900 to-slate-900 rounded-lg overflow-hidden border border-orange-500/30 shadow-2xl">
                        <div class="z-10 px-4">
                            <div class="w-16 h-16 mx-auto mb-4 bg-orange-500/20 rounded-full flex items-center justify-center">
                                <span class="text-3xl">üíº</span>
                            </div>
                            <h1 class="text-3xl md:text-5xl font-bold mb-4 leading-tight text-white drop-shadow-lg">
                                My Experience
                            </h1>
                            <p class="text-lg md:text-xl font-medium mb-6 max-w-3xl mx-auto leading-relaxed text-gray-100">
                                A timeline of my professional journey and accomplishments.
                            </p>
                            <div class="flex flex-wrap justify-center gap-3">
                                <span class="px-3 py-1 bg-black/30 backdrop-blur-md border border-white/20 rounded-full text-sm text-white">üéì UTHM & UiTM</span>
                                <span class="px-3 py-1 bg-black/30 backdrop-blur-md border border-white/20 rounded-full text-sm text-white">üìÖ 2021 - Present</span>
                                <span class="px-3 py-1 bg-black/30 backdrop-blur-md border border-white/20 rounded-full text-sm text-white">üèÜ {experiences.length} Positions</span>
                            </div>
                        </div>
                    </section>
                </NotebookCell>

                <!-- Cell 2: Timeline -->
                <NotebookCell
                    cellNumber={2}
                    code={`// Render experience timeline\nexperience.forEach((exp, index) => {\n  console.log(\`[\${index + 1}] \${exp.title}\`);\n  console.log(\`    üìç \${exp.organization}\`);\n  console.log(\`    üìÖ \${exp.duration}\`);\n});`}
                >
                    <div class="space-y-6">
                        <h2 class="text-2xl font-bold text-gray-900 dark:text-white text-center mb-6">Professional Timeline</h2>
                        
                        <!-- Timeline Container -->
                        <div class="relative">
                            <!-- Timeline Line -->
                            <div class="absolute left-4 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-blue-500 via-green-500 to-purple-500 transform md:-translate-x-1/2"></div>
                            
                            {experiences.map((exp, index) => (
                                <div class={`relative flex flex-col md:flex-row gap-4 md:gap-8 mb-8 ${index % 2 === 0 ? 'md:flex-row-reverse' : ''}`}>
                                    <!-- Timeline Marker -->
                                    <div class="absolute left-4 md:left-1/2 w-8 h-8 bg-white dark:bg-[#161b22] border-4 border-blue-500 rounded-full transform -translate-x-1/2 flex items-center justify-center z-10">
                                        <span class="text-sm">{exp.icon}</span>
                                    </div>
                                    
                                    <!-- Content Card -->
                                    <div class={`ml-12 md:ml-0 md:w-5/12 ${index % 2 === 0 ? 'md:mr-auto md:pr-8' : 'md:ml-auto md:pl-8'}`}>
                                        <div class="bg-white dark:bg-[#161b22] p-6 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-500/50 transition-all shadow-sm">
                                            <!-- Code-style Header -->
                                            <div class="font-mono text-xs mb-4 space-y-1">
                                                <div class="flex gap-2">
                                                    <span class="text-gray-400 dark:text-gray-600 w-4 text-right">{index + 1}</span>
                                                    <span class="text-purple-600 dark:text-purple-400">{"{"}</span>
                                                </div>
                                                <div class="flex gap-2">
                                                    <span class="text-gray-400 dark:text-gray-600 w-4 text-right">{index + 2}</span>
                                                    <span class="pl-4">
                                                        <span class="text-blue-600 dark:text-blue-400">"position"</span>
                                                        <span class="text-gray-500">:</span>
                                                        <span class="text-green-600 dark:text-green-400 ml-1">"{exp.title}"</span>
                                                    </span>
                                                </div>
                                            </div>
                                            
                                            <!-- Title & Organization -->
                                            <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-1">{exp.title}</h3>
                                            <p class="text-sm text-blue-600 dark:text-blue-400 mb-2">{exp.organization}</p>
                                            <p class="text-xs text-gray-500 mb-4 flex items-center gap-1">
                                                <span>üìÖ</span> {exp.duration}
                                            </p>
                                            
                                            <!-- Responsibilities -->
                                            <ul class="space-y-2">
                                                {exp.responsibilities.map((resp) => (
                                                    <li class="flex gap-2 text-sm text-gray-600 dark:text-gray-400">
                                                        <span class="text-green-500 mt-1">‚ñ∏</span>
                                                        <span>{resp}</span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </NotebookCell>

                <!-- Back to Profile -->
                <div class="mt-8 text-center">
                    <a
                        href={import.meta.env.BASE_URL + "home-software-developer/"}
                        class="inline-flex items-center gap-2 px-6 py-3 bg-gray-100 dark:bg-[#161b22] border border-gray-200 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:border-blue-500/50 hover:text-blue-600 dark:hover:text-blue-400 transition-all"
                    >
                        <span>‚Üê</span> Back to Developer Profile
                    </a>
                </div>
            </div>
        </main>

        <MobileNav files={files} />
    </div>
</Layout>

<script>
    // Theme Toggle Logic
    const themeBtn = document.getElementById('theme-toggle-btn');
    const sunIcon = document.getElementById('sun-icon');
    const moonIcon = document.getElementById('moon-icon');
    const html = document.documentElement;

    const savedTheme = localStorage.getItem('theme');
    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

    if (savedTheme === 'dark' || (!savedTheme && systemDark)) {
        html.classList.add('dark');
        sunIcon?.classList.remove('hidden');
        moonIcon?.classList.add('hidden');
        document.getElementById('mobile-sun-icon')?.classList.remove('hidden');
        document.getElementById('mobile-moon-icon')?.classList.add('hidden');
    } else {
        html.classList.remove('dark');
        sunIcon?.classList.add('hidden');
        moonIcon?.classList.remove('hidden');
        document.getElementById('mobile-sun-icon')?.classList.add('hidden');
        document.getElementById('mobile-moon-icon')?.classList.remove('hidden');
    }

    themeBtn?.addEventListener('click', () => {
        html.classList.toggle('dark');
        const isDark = html.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');

        if (isDark) {
            sunIcon?.classList.remove('hidden');
            moonIcon?.classList.add('hidden');
            document.getElementById('mobile-sun-icon')?.classList.remove('hidden');
            document.getElementById('mobile-moon-icon')?.classList.add('hidden');
        } else {
            sunIcon?.classList.add('hidden');
            moonIcon?.classList.remove('hidden');
            document.getElementById('mobile-sun-icon')?.classList.add('hidden');
            document.getElementById('mobile-moon-icon')?.classList.remove('hidden');
        }
    });

    // Mobile Navigation
    const mobileFilesBtn = document.getElementById('mobile-files-btn');
    const mobileFileMenu = document.getElementById('mobile-file-menu');
    const mobileMenuContent = mobileFileMenu?.querySelector('div');

    mobileFilesBtn?.addEventListener('click', () => {
        if (mobileFileMenu && mobileMenuContent) {
            mobileFileMenu.classList.remove('hidden');
            setTimeout(() => {
                mobileFileMenu.classList.add('opacity-100');
                mobileMenuContent.classList.remove('translate-y-full');
            }, 10);
        }
    });

    document.getElementById('mobile-theme-btn')?.addEventListener('click', () => {
        themeBtn?.click();
    });
</script>

<style>
    #experience-content::-webkit-scrollbar {
        width: 12px;
    }
    #experience-content::-webkit-scrollbar-track {
        background: transparent;
    }
    #experience-content::-webkit-scrollbar-thumb {
        background-color: #d1d5db;
        border-radius: 6px;
        border: 3px solid transparent;
        background-clip: content-box;
    }
    #experience-content::-webkit-scrollbar-thumb:hover {
        background-color: #9ca3af;
    }
    :global(.dark) #experience-content::-webkit-scrollbar-thumb {
        background-color: #30363d;
    }
    :global(.dark) #experience-content::-webkit-scrollbar-thumb:hover {
        background-color: #484f58;
    }
</style>
